"use strict";class Identifier{constructor(t=Identifier.DEFAULT_SERIALIZED_IDENTIFIER){this.depth=0,this.paths=new Uint32Array(Identifier.MAX_DEPTH),this.setValue(t)}getDepth(){return this.depth}getPaths(){return this.paths}setValue(t,e,i,s,r){if("string"==typeof t){var n=Common.fromHexString(t);if(n.length!==Identifier.LENGTH)throw"Invalid identifier.";if(this.depth=n[Identifier.DEPTH_INDEX],!(this.depth<=Identifier.MAX_DEPTH))throw"Invalid identifier.";for(var h=new DataView(n.buffer),E=0;E<this.getPaths().length;++E)this.paths[E]=h.getUint32(Identifier.PATHS_INDEX+E*Uint32Array.BYTES_PER_ELEMENT,!1)}else{if(!(t<=Identifier.MAX_DEPTH))throw"Invalid identifier.";if(this.depth=t,e instanceof Uint32Array==!0){var a=e;if(a.length!==this.getPaths().length)throw"Invalid identifier.";for(E=0;E<this.getPaths().length;++E)this.paths[E]=a[E]}else this.paths[0]=e,this.paths[1]=i,this.paths[2]=s,this.paths[3]=r}}getValue(){var t=new Uint8Array(Identifier.LENGTH);t[Identifier.DEPTH_INDEX]=this.getDepth();for(var e=new DataView(t.buffer),i=0;i<this.getPaths().length;++i)e.setUint32(Identifier.PATHS_INDEX+i*Uint32Array.BYTES_PER_ELEMENT,this.getPaths()[i],!1);return t}equalsValue(t){return this.getDepth()===t.getDepth()&&Common.arraysAreEqual(this.getPaths(),!0===t.getPaths())}includesValue(t){return this.getDepth()===t.getDepth()&&this.getLastPath()>=t.getLastPath()}getLastPath(){return 0===this.getDepth()?0:this.getPaths()[this.getDepth()-1]}getNext(t=Identifier.NO_HEIGHT){var e=this.clone();if(++e.paths[e.getDepth()-1],t!==Identifier.NO_HEIGHT)switch(Consensus.getWalletType()){case Consensus.MWC_WALLET_TYPE:e.paths[Identifier.HEIGHT_PATH_INDEX]=t.modulo(Identifier.MAXIMUM_HEIGHT+1).toNumber()}return e}getParent(){var t=this.clone();return this.getDepth()>0&&(t.paths[t.getDepth()-1]=0,--t.depth),t}getChild(t=Identifier.NO_HEIGHT){var e=this.clone();if(this.getDepth()<Identifier.MAX_DEPTH&&++e.depth,t!==Identifier.NO_HEIGHT)switch(Consensus.getWalletType()){case Consensus.MWC_WALLET_TYPE:e.paths[Identifier.HEIGHT_PATH_INDEX]=t.modulo(Identifier.MAXIMUM_HEIGHT+1).toNumber()}return e}getHeight(){switch(Consensus.getWalletType()){case Consensus.MWC_WALLET_TYPE:var t=this.getPaths()[Identifier.HEIGHT_PATH_INDEX];return t!==Consensus.FIRST_BLOCK_HEIGHT?new BigNumber(t):Identifier.NO_HEIGHT;case Consensus.GRIN_WALLET_TYPE:return Identifier.NO_HEIGHT}}removeExtras(){var t=this.clone();switch(Consensus.getWalletType()){case Consensus.MWC_WALLET_TYPE:t.paths[Identifier.HEIGHT_PATH_INDEX]=Consensus.FIRST_BLOCK_HEIGHT}return t}static isPathHardened(t){return 0!=(t&Identifier.PATH_HARDENED_MASK)}static get LENGTH(){return 1*Uint8Array.BYTES_PER_ELEMENT+Identifier.MAX_DEPTH*Uint32Array.BYTES_PER_ELEMENT}static get MAX_DEPTH(){return 4}static get ROOT_SERIALIZED_IDENTIFIER(){return"0000000000000000000000000000000000"}static get PATHS_INDEX(){return Identifier.DEPTH_INDEX+1}static get NO_IDENTIFIER(){return null}static get NO_HEIGHT(){return null}static get MAXIMUM_HEIGHT(){return Common.UINT32_MAX_VALUE}clone(){var t=new Identifier;return t.setValue(this.getDepth(),this.getPaths()),t}static get DEFAULT_SERIALIZED_IDENTIFIER(){return"0200000000000000000000000000000000"}static get DEPTH_INDEX(){return 0}static get PATH_HARDENED_MASK(){return 2147483648}static get HEIGHT_PATH_INDEX(){return Identifier.MAX_DEPTH-1}}